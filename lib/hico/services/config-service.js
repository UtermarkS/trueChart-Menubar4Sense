define(["qvangular","qlik","ng!$q","../prefix","../../../config"],function(n,r,e,t,i){function c(){function n(){return t().then(function(){return c})}function r(n){c=n}function t(){return l.promise}var c=[],l=e.defer();this.getActionBlacklist=n,this.getReady=t,function(){u(i).then(r).then(function(){l.resolve()})}()}function u(n){return r.getGlobal().getAuthenticatedUser().then(function(r){var e={};r.qReturn.split(";").forEach(function(n){n=n.trim(),0===n.indexOf("UserDirectory=")?e.directory=n.slice("UserDirectory=".length):0===n.indexOf("UserId=")&&(e.id=n.slice("UserId=".length))});var t=[null,null,null,null];try{n.actionPermissions.every(function(n){function r(r){return n.match.UserId.indexOf(r)>-1}function i(){return n.match.UserId.indexOf("*")>-1}return function(){return n.match.UserDirectory.indexOf("*")>-1}()?i()?null===t[3]&&(t[3]=n.blacklist):r(e.id)&&null===t[1]&&(t[1]=n.blacklist):function(r){return n.match.UserDirectory.indexOf(r)>-1}(e.directory)&&(i()?null===t[2]&&(t[2]=n.blacklist):r(e.id)&&null===t[0]&&(t[0]=n.blacklist)),null===t[0]})}catch(n){console.error("An Error occured during processing the configuration file (config.js). Please contact your Administrator",n)}return t.filter(function(n){return null!==n})[0]||[]})}return n.service(t+"ConfigService",[c]),c});